export const VIDEO_ANALYSIS_PROMPT = `아래 동영상을 항목별로 분석해서 반드시 아래와 같은 JSON 구조로만 반환해줘.

**중요: 분석의 정확성과 신뢰도를 높이기 위한 엄격한 기준 적용**

- 아래 카드(key, type, title, 데이터 구조)의 데이터만 반환하고, 이외의 항목(예: 제목과 썸네일 매력도 등)은 절대 추가하지 마.
- 카드 순서, key, type, title, 데이터 구조 모두 아래 예시와 100% 일치해야 하며, 이외의 항목이 하나라도 있으면 잘못된 응답임.
- KPI(조회수, 좋아요, 댓글, 구독자 증감)는 각 항목별로 매우 보수적인 기준(min)~일반적인 기준(max)으로 예측 범위를 산출해서 min/max 값으로 반환(예: 12000~18000), 아이콘+숫자(천단위 콤마)+라벨로 표시, 모든 숫자는 언더스코어 없이 반환.
- '추천 제목 3개'를 반드시 titleSuggestions라는 배열로 cards와 별도로 반환해야 함.
- '영상 상세 피드백' 카드는 반드시 {time, scene, caption, improvedScene, improvedCaption} 형태의 배열로 반환해야 하며, 각 항목은 시간(00:24 형식의 시간), 기존 장면, 기존 자막, 개선 장면, 개선 자막 순서로 명확히 작성해야 함.
- **소구 포인트 및 바이럴 요소**: 반드시 소구 포인트(시청자의 관심을 끄는 요소)와 바이럴 요소(공유하고 싶게 만드는 요소)를 각각 구분하여 분석해야 함. 소구 포인트는 "소구:" 접두사, 바이럴 요소는 "바이럴:" 접두사를 붙여서 구분할 것.

**엄격한 점수 기준 (절대 관대하게 평가하지 말 것):**

1. **훅(Hook) 효과성 점수 기준 (매우 엄격하게 평가):**
   - 90-100점: 첫 3초 내에 강력한 충격, 호기심, 감정적 몰입을 동시에 유발하는 완벽한 훅
   - 80-89점: 첫 5초 내에 명확한 관심 유발 요소가 있지만 일부 아쉬운 점 존재
   - 70-79점: 평범한 수준의 관심 유발, 특별함이 부족
   - 60-69점: 약한 훅, 시청자가 쉽게 이탈할 가능성 높음
   - 50-59점: 훅이 거의 없음, 즉시 이탈 위험
   - 50점 미만: 훅 효과 전혀 없음

2. **재시청 가능성 점수 기준 (현실적으로 평가):**
   - 90-100점: ASMR, 중독성 있는 음악/리듬, 새로운 디테일 발견 가능한 콘텐츠
   - 80-89점: 일부 구간에서 재시청 욕구를 유발하는 요소 존재
   - 70-79점: 한 번 더 볼 만한 가치는 있지만 강한 동기 부족
   - 60-69점: 재시청할 특별한 이유 없음
   - 50-59점: 재시청 가능성 낮음
   - 50점 미만: 재시청할 이유 전혀 없음

**종합 분석 작성 기준 (미니 분석 보고서 형태):**
종합 분석은 단순 요약이 아닌 다음 구조의 상세한 미니 보고서로 작성:

1. **핵심 강점 분석** (3-4줄): 이 영상의 가장 강력한 어필 포인트와 차별화 요소
2. **타겟 오디언스 분석** (3-4줄): 주요 시청층과 그들이 이 영상에 반응하는 이유
3. **성과 예측 및 근거** (3-4줄): 예상 성과와 그 근거가 되는 구체적 요소들
4. **주요 개선점** (3-4줄): 성과 향상을 위한 핵심 개선 방향
5. **시장 포지셔닝** (2-3줄): 경쟁 콘텐츠 대비 이 영상의 위치와 전략적 가치

**중요한 데이터 구조 요구사항:**
1. 예상 시청시간 & 유지율: 영상 길이에 맞게 3초 간격으로 labels 생성 (예: 30초 영상이면 ["0s", "3s", "6s", "9s", "12s", "15s", "18s", "21s", "24s", "27s", "30s"]), data는 100에서 시작해서 점진적으로 감소하는 유지율(%)
2. 감정 곡선: 영상의 실제 진행 상황에 따라 시간대별 장면을 분석하여 labels는 영상 길이에 맞는 시간 구간 (예: ["0-5초", "5-10초", "10-15초", "15-20초", "20-25초", "25-30초"]), data는 각 구간별 시청자 감정 점수 (0-100, 높을수록 긍정적/흥미로운 감정). 각 구간의 실제 장면 내용(예: 인트로, 문제 상황 제시, 해결 과정, 결과 공개 등)을 분석하여 시청자가 느낄 감정의 강도를 예측해야 함
3. 예상 시청자 구성: 성별은 ["여성", "남성", "사용자 지정"] 3개 항목, 연령대는 ["만 13-17세", "만 18-24세", "만 25-34세", "만 35-44세", "만 45-54세", "만 55-64세", "만 65세 이상"] 7개 항목으로 각각 퍼센트 데이터
4. 훅(Hook) 효과성: value는 반드시 "점수/100" 형태 (예: "73/100"), desc는 구체적인 분석 내용과 점수 근거
5. 영상 상세 피드백: 실제 영상을 분석하여 최대한 모든 장면에 대해 구체적이고 자세하게 분석하고(장면설명, 분위기, 훅 요소 등 / 설명할 수 있는 모든 장면을 넣고, 자막이나 나레이션이 없이 장면만 있을 경우에는 기존 장면만 출력, 장면 하나에 자막이 여러개 나오는 경우 동일한 시간, 기존 장면에 자막을 이어서 작성할 것. 자막이나 나레이션이 있는 부분은 절대 빼먹지 말고 *무조건* 포함 시킬 것. 전체 영상 내용을 확인하면서 개선사항을 확인하려는 것임.) 개선이 필요하지 않은 장면은 기존 장면, 기존 자막만 표시할 것.(이 경우, 개선 장면과 개선 자막은 빈 칸으로 둘 것) 개선이 필요한 장면이 있다면 개선 제안을 제공. 제안하는 장면과 자막은 영상의 흐름과 맞도록 흐름이나 어투를 맞춰서 작성할 것. 각 항목은 time(00:24 형식의 시간), scene(기존 장면 설명), caption(기존 자막/텍스트), improvedScene(개선된 장면 제안), improvedCaption(개선된 자막/텍스트 제안)의 5개 필드로 구성

예시:
{
  "kpis": [
    { "label": "예상 총 조회수", "min": 12000, "max": 18000, "icon": "Eye" },
    { "label": "예상 좋아요", "min": 300, "max": 500, "icon": "ThumbsUp" },
    { "label": "예상 댓글 수", "min": 40, "max": 80, "icon": "MessageCircle" },
    { "label": "예상 구독자 증감", "min": 5, "max": 15, "icon": "TrendingUp" }
  ],
  "cards": [
    { "key": "appeal", "type": "checklist", "title": "소구 포인트 및 바이럴 요소", "items": [{"text": "소구: 드라마틱한 변화로 시선 집중", "checked": true}, {"text": "바이럴: 공유하고 싶은 놀라운 결과", "checked": true}] },
    { "key": "watch_time", "type": "line", "title": "예상 시청시간 & 유지율", "labels": ["0s", "3s", "6s", "9s", "12s", "15s", "18s", "21s", "24s", "27s", "30s"], "data": [100, 95, 90, 85, 80, 75, 70, 65, 60, 55, 50], "highlight": {"label": "평균 시청시간", "value": "18초"} },
    { "key": "dropoff", "type": "gauge", "title": "예상 이탈율 및 주요 이탈 구간", "value": 35, "dropoffRange": "12-15초", "reason": "..." },
    { "key": "improve", "type": "list", "title": "개선점 제안", "items": ["...", "...", "..."] },
    { "key": "audience", "type": "audience-bar", "title": "예상 시청자 구성", "genderLabels": ["여성", "남성", "사용자 지정"], "genderData": [94.2, 5.8, 0], "ageLabels": ["만 13-17세", "만 18-24세", "만 25-34세", "만 35-44세", "만 45-54세", "만 55-64세", "만 65세 이상"], "ageData": [0, 0.3, 13.9, 24.2, 42.2, 18.5, 0.9] },
    { "key": "emotion", "type": "line", "title": "감정 곡선", "labels": ["시작", "문제인식", "해결과정1", "해결과정2", "결과확인", "마무리"], "data": [50, 30, 60, 75, 90, 80] },
    { "key": "hook", "type": "score", "title": "훅(Hook) 효과성 (첫 5초)", "value": "73/100", "desc": "첫 3초에 문제 상황을 제시하지만 충격적 요소 부족. 더 극적인 연출 필요" },
    { "key": "competitor", "type": "list", "title": "경쟁 콘텐츠 차별점", "items": ["...", "...", "..."] },
    { "key": "replay", "type": "gauge", "title": "재시청 가능성", "value": 45, "reason": "일회성 정보 전달 위주로 재시청 동기 부족. ASMR 요소나 숨겨진 디테일 추가 필요" },
    { "key": "feedback", "type": "feedback-list", "title": "영상 상세 피드백", "items": [{"time": "00:24", "scene": "지저분한 방을 보여주는 인트로 장면", "caption": "또 이렇게 됐네요... 😅", "improvedScene": "극적인 대비를 위해 더 지저분한 각도에서 촬영, 클로즈업 추가", "improvedCaption": "이 정도면 재해 수준이죠? 😱 과연 이 방이 변할 수 있을까요?"}, {"time": "01:15", "scene": "청소하는 과정을 보여주는 장면", "caption": "열심히 치우는 중입니다", "improvedScene": "타임랩스 효과와 함께 Before/After 분할 화면 구성", "improvedCaption": "🔥 변신 시작! 30분 만에 일어날 기적을 보세요!"}, {"time": "02:30", "scene": "깨끗해진 방을 보여주는 마무리 장면", "caption": "완성! 어떤가요?", "improvedScene": "같은 앵글에서 촬영하여 극적 대비 효과 극대화, 조명 개선", "improvedCaption": "✨ 완전 다른 공간이 됐어요! 구독자님들도 이런 변화 원하시죠?"}] },
    { "key": "summary", "type": "summary", "title": "종합 분석", "summary": "**핵심 강점 분석**: ... **타겟 오디언스 분석**: ... **성과 예측 및 근거**: ... **주요 개선점**: ... **시장 포지셔닝**: ..." }
  ],
  "titleSuggestions": ["...", "...", "..."]
}`;

// URL 분석용 프롬프트 (동적 정보 포함)
export const createUrlAnalysisPrompt = (url: string, title: string, thumbnail: string) => {
  return `${VIDEO_ANALYSIS_PROMPT}

영상 URL: ${url}
영상 제목: ${title}
영상 썸네일: ${thumbnail}

위 영상을 분석해서 JSON 형태로만 반환해줘.`;
}; 